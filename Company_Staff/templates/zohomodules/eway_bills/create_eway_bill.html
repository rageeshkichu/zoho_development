{% extends 'base.html' %}
{% block content %}
{% load static %}

<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" /> -->

<style>
  .modal{
    z-index: 9999;
    overflow: scroll;
  }
  .selectize-input {
    background-color: #000 !important;
    color: white !important;
}

.selectize-input input {
    color: white !important;
}

  /* .form-group{
    width: 40%;
  } */

  .row:after {
    content: "";
    display: table;
    clear: both;
  }
  
  @media screen and (max-width: 600px) {
    .col-25, .col-75, input[type=submit] {
      width: 100%;
      margin-top: 0;
    }

    input[type=text], select, textarea {
      width: 100%;
    }
  }

  .dropdown input,
  .dropdown button {
    
    position: absolute;
    top: 100%;
    left: 0;
  }

  .dropdown.open input,
  .dropdown.open button {
    display: block;
  }

  .row a{
    color: rgb(218, 164, 48);
    font-size: 12px;
  }

  .table th a{
    color:rgb(218, 164, 48);
    font-size: 11px;
    margin-left: 100px;
  }

  ::-webkit-scrollbar {
    display: none;
  }

  ::-webkit-scrollbar-track {
    background: #f1f1f1; 
  }

  ::-webkit-scrollbar-thumb {
    background: #888; 
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #555; 
  }

  .item{
    height: auto;
  }

  .labels{
    color: white; 
    font-size:2.5vh; 
    font-weight: bolder;
  }

  .btn-outline-warning:hover {
    color: black !important;
    font-weight: bold;
  }
  .dropdown-item.customers-options:hover, .dropdown-item.items-options:hover{
    background: white !important;
    color: black !important;
    cursor: pointer;
  }
</style>
<style>
  label{
      color: white;
  }
  .section-3
  {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      margin-top: 1rem;
  }
  .section-3 .section-toggle
  {
      margin-bottom: 0.50rem;
  }
   .section-toggle a
  {

      color: rgb(230, 171, 45);
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      font-size:1.275rem;
  }
  .add_another
  {
     
      color: rgb(230, 171, 45);
  }
  #tbl thead th{
      font-size: 0.785rem;
  }
  @media (max-width:700px)
  {
  .section-3
  {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr ;  

  }
  .section-3 .section-toggle a
  {

      color: rgb(230, 171, 45);
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      font-size:0.875rem;
  }
  }
 


  /* Account Modal */

  .select-box1 {
      position: relative;
      width: 100%;
  }
  

  .select-option1 {
      position: relative;
      
  }

  .select-option1 input {
      width: 100%;
      cursor: pointer;
      background-color: white;
      color: black;
      border-radius: 7px;
      padding: 10px 15px;
      border: 0 !important;
      outline: 0 !important;
  }

  .select-option1:after {
      content: "";
      border-top: 12px solid #000;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      position: absolute;
      right: 15px;
      top: 50%;
      margin-top: -8px;

  }

  .content1 {
      background-color: white;
      position: absolute;
      color: black;
      border-radius: 7px;
      margin-top: 15px;
      width: 100%;
      z-index: 999;
      padding: 20px;
      display: none;
  }

  .search1 input {
      width: 100%;
      font-size: 17px;
      padding: 15px;
      outline: 0;
      border: 1px solid #b3b3b3;
      border-radius: 5px;
  }

  .options1 {
      margin-top: 10px;
      max-height: 150px;
      overflow-y: scroll;
      padding: 0;
  }

  /* .options1::-webkit-scrollbar{
      width: 5px;
     
    } */
  .options1 li {
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      border-bottom: 1px solid gray;
  }

  .select-box1.active .content1 {
      display: block;
  }

  .select-box1.active .select-option1:after {
      transform: rotate(-180deg);
  }
     
</style>

<div class="body-wrapper">
  <div class="container-fluid">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'company_dashboard' %}" class="text-warning-emphasis">Dashboard</a></li>
        <li class="breadcrumb-item"><a class="text-warning-emphasis">E Way Bills</a></li>
        <li class="breadcrumb-item" aria-current="page">Create</li>
      </ol>
    </nav>
      <div class="row mt-5">
          <div class="col-md-12">
            <div class="card mb-5 px-3 py-4" style="background-color: black; border-radius: 1vh;">
              <h1 class="mb-0 text-uppercase text-right" style="color: white; font-weight: bolder;">CREATE E WAY BILL</h1><br>
              <hr class="text-warning">
              <form action="" method="post" enctype="multipart/form-data"id="myForm" onsubmit="return validateForm()">
                {% csrf_token %}
                <div class="row">
                    <div class="row mt-2">
                        <label for="" class="col-md-3 labels">Document Type</label>
                        <div class="col-md-6">
                            <select class="form-control text-white bg-black" id="" name="">
                                <option hidden value="type1">select document type</option>
                                <option value="invoices">Invoices</option>
                                <option value="credit_notes">Credit Notes</option>
                                <option value="delivery_chellans">Delivery Chellans</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mt-2">
                        <label for="" class="col-md-3 labels">Transaction Sub Type</label>
                        <div class="col-md-6">
                            <select class="form-control text-white bg-black" id="" name="">
                                <option value="type1">select Transaction Sub type</option>
                                <option value="supply">Supply</option>
                                <option value="export">Export</option>
                                <option value="skd/ckd">SKD/CKD</option>
                            </select>
                        </div>
                    </div>
                    <h1>Customer details</h1>
                  <div class="col-md-3">
                    <label for="" class="labels">Customer</label>
                    <br>
                    <span class="text-danger" id="custErr"></span>
                  </div>
                  <div class="col-md-6">
                    <input type="hidden" name="customerId" id="customerId" value="">
                    <div class="d-flex">
                        <div class="w-100">
                            <div style="margin-top: 10px;" class="p-0 border-0 bg-none position-relative drop-box">
                                <input required type="text" id="customer" value="" name="customer" class="dropdown-toggle form-control text-white customers-display" onkeyup="filterCustomers()" data-bs-toggle="dropdown" aria-expanded="false" placeholder="Select Customer.." autocomplete="off">
                                <ul class="dropdown-menu w-100 customers-available position-absolute bg-black text-white" id="cust_drop"  style="overflow-y: auto; height: fit-content;max-height: 40vh; border: 1px solid gray;"> 
                                    <li class="dropdown-item customers-options text-white" onclick="getCustomerDetails('','')">Select Customer</li>
                                    {% for cust in customers %}
                                    <li class="dropdown-item customers-options text-white" onclick="getCustomerDetails(`{{cust.id}}`,this.innerHTML)">{{cust.first_name}}</li>
                                    {% endfor %}
                                </ul>
                                
                            </div>
                        </div>
                        <button type="button" data-toggle="modal" data-target="#newCustomer" class="btn btn-outline-warning py-2 ms-1">+</button>
                    </div>
                  </div>
                </div>
                <div class="row mt-2">
                  <label for="" class="col-md-3 labels">Email</label>
                  <div class="col-md-6">
                    <input type="text" class="form-control text-white bg-black" id="customerEmail" name="customer_email" readonly>
                  </div>
                </div>

                <div class="row mt-2">
                  <label for="" class="col-md-3 labels">GST Type</label>
                  <div class="col-md-6">
                    <input type="text" class="form-control text-white bg-black" id="customerGstType" name="customer_gst_type" readonly>
                  </div>
                </div>

                <div class="row mt-2" id="customerGstInDisplay" style="display: flex;">
                  <label for="" class="col-md-3 labels">GSTIN</label>
                  <div class="col-md-6">
                    <input type="text" class="form-control text-white bg-black" id="customerGSTIN" name="customer_gstin" readonly>
                  </div>
                </div>

                <div class="row mt-2" id="billAddressSection">
                  <label for="" class="col-md-3 labels">Billing Address</label>
                  <div class="col-md-6">
                    <textarea class="form-control text-white bg-black" name="bill_address" id="billAddress" rows="4" readonly></textarea>
                  </div>
                </div>

                <div class="row mt-2">
                  <label for="" class="col-md-3 labels">Place of Supply</label>
                  <div class="col-md-6">
                    <input hidden value="{{cmp.state}}" id="cmpstate">
                    <select name="place_of_supply" id="placeOfSupply" class="form-control bg-black text-white">
                      <option value="" selected>Select Place of Supply</option>
                      <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                      <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                      <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> 
                      <option value="volvo">[AS]-Assam</option>
                      <option value="[BR]-Bihar">[BR]-Bihar</option> 
                      <option value="volvo">[CH]-	Chandhigarh</option>
                      <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                      <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                      <option value="volvo">[DL]-	Delhi</option>
                      <option value="[GA]-Goa">[GA]-Goa</option> 
                      <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                      <option value="[HR]-Haryana">[HR]-Haryana</option> 
                      <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                      <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                      <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                      <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                      <option value="[KL]-Kerala">[KL]-Kerala</option>
                      <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                      <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                      <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                      <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                      <option value="[MN]-Manipur">[MN]-Manipur</option>  
                      <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                      <option value="[NL]-Nagaland">[NL]-Nagaland</option> 
                      <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                      <option value="[OD]-Odisha">[OD]-Odisha</option>
                      <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                      <option value="[PB]-Punjab">[PB]-Punjab.</option>
                      <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                      <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                      <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                      <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                      <option value="[TR]-Tripura">[TR]-Tripura</option>
                      <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                      <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                      <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                      <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                  </select>
                  </div>
                </div>
                <script>
                    
                    function getCustomerDetails(custId, name){
                        $('#customer').val(name)
                        console.log('name',name);
                        if($('#customer').val() != ""){
                            $('#custErr').text('');
                            $.ajax({
                                type : 'POST',
                                url: "{% url 'getCustomerDetailsAjax' %}",
                                data: {
                                    id: custId,
                                    csrfmiddlewaretoken: '{{ csrf_token }}',
                                },
                                
                                success: function(data){
                                    console.log('AJAX-Response-->',data);
                                    document.getElementById('customerId').value = data.id;
                                    document.getElementById('customerEmail').value = data.email;
                                    document.getElementById('placeOfSupply').value = data.shipState;
                                    document.getElementById('customerGstType').value = data.gstType;
                                    if(data.street == "" && data.city == "" && data.state == ""){
                                        $("#billAddressSection").hide();
                                    }else{
                                        $('#billAddressSection').show();
                                        document.getElementById('billAddress').value = data.street + ',' + data.city + '\n' + data.state + '\n' + data.country  + '\n' + data.pincode ;
                                    }
                                    if(data.gstin){
                                        document.getElementById('customerGstInDisplay').style.display = 'flex';
                                        document.getElementById('customerGSTIN').value = data.gstNo;
                                    }else{
                                        document.getElementById('customerGstInDisplay').style.display = 'none';
                                        document.getElementById('customerGSTIN').value = '';
                                    }
                                    $('#applyPriceList').prop('checked') ? $('#applyPriceList').prop('checked', false) : $('#applyPriceList').prop('checked',false);
                                    
                                }
                            });
                        }else{
                            document.getElementById('customerEmail').value = "";
                            document.getElementById('placeOfSupply').value = "";
                            document.getElementById('customerGstType').value = "";
                            document.getElementById('billAddress').value ="";
                            document.getElementById('customerGSTIN').value = "";
                            $('#custErr').text('Select a customer..');
      }
  }
                </script>

                <hr>
                <div class="row mt-2" id="billAddressSection">
                    <label for="" class="col-md-3 labels">E Way Billing Address</label>
                    <div class="col-md-6">
                      <textarea class="form-control text-white bg-black" name="bill_address" id="billAddress" rows="4"></textarea>
                    </div>
                  </div>
                    <div class="row mt-2">
                      <label for="" class="col-md-3 labels">E Way Bill No.</label>
                      <div class="col-md-6">
                        <input type="text" class="form-control bg-black text-white" name="reference_number" value="" readonly>
                      </div>
                    </div>
                  
                  <div class="row mt-2">
                    <div class="col-md-12 mt-2">
                      <div class="row">
                        <label for="" class="col-md-3 labels">Start Date</label>
                        <div class="col-md-6">
                          <input type="date" class="form-control bg-black text-white" id="startDate" name="start_date" value="{% now 'Y-m-d' %}">
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                    <h1>Transportation details</h1>
                        <div class="row mt-2">
                          <label for="" class="col-md-3 labels">Transportation Type</label>
                          <div class="col-md-6">
                            <select class="form-control bg-black text-white" id="entryType" name="entry_type">
                              <option value="">Choose Transportation Type</option>
                              <option value="bus">Bus</option>
                              <option value="train">Train</option>
                              <option value="car">Car</option>
                          </select>
                          </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-12 mt-2">
                              <div class="row">
                                <label for="" class="col-md-3 labels">Kilometers</label>
                                <div class="col-md-6">
                                  <input type="text" class="form-control bg-black text-white" id="" name="" value="">
                                </div>
                              </div>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-12 mt-2">
                              <div class="row">
                                <label for="" class="col-md-3 labels">Vehicle Number</label>
                                <div class="col-md-6">
                                  <input type="text" class="form-control bg-black text-white" id="" name="" value="">
                                </div>
                              </div>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-12 mt-2">
                              <div class="row">
                                <label for="" class="col-md-3 labels">Description</label>
                                <div class="col-md-6">
                                  <input type="text" class="form-control bg-black text-white" id="" name="" value="">
                                </div>
                              </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-12 table-responsive">
                              <table class="table table-bordered" id="invoiceItemsTable">
                                <thead>
                                    <tr>
                                        <th class="text-center text-white" style="width: 3%;">#</th>
                                        <th class="text-center text-white" style="width: 20%;">PRODUCT</th>
                                        <th class="text-center text-white" style="width: 11%;">HSN</th>
                                        <th class="text-center text-white" style="width: 15%;">QTY</th>
                                        <th class="text-center text-white" style="width: 12%;">PRICE</th>
                                        <th class="text-center text-white" style="width: 15%;">TAX (%)</th>
                                        <th class="text-center text-white" style="width: 9%;">DISCOUNT</th>
                                        <th class="text-center text-white" style="width: 12%;">TOTAL</th>
                                        <th style="width: 3%;"></th>
                                    </tr>
                                </thead>
                                <tbody id="items-table-body">
                                    <tr id='tab_row1'>
                                        <td class="nnum  bg-black text-white" style="text-align: center;">1</td>
                                        <td>
                                            <div class="d-flex">
                                                <div class="w-100">
                                                    <div class="p-0 border-0 bg-none position-relative drop-box" style="display: block;">
                                                        <input required type="text" id="item1" value="" name="item_name[]" class="dropdown-toggle form-control text-white item-display" onkeyup="filterFunction($(this).attr('id'))"  data-bs-toggle="dropdown" aria-expanded="false" placeholder="Items.." autocomplete="off">
                                                        <ul class="dropdown-menu w-100 items-available position-absolute bg-black text-white" id="menu1"  style="overflow-y: auto; height: fit-content;max-height: 40vh; border: 1px solid gray;"> 
                                                            {% for i in items %}
                                                            <li class="dropdown-item items-options text-white" onclick="getItemDetails($(this).parent().prev().attr('id'),`{{i.item_name}}`)">{{i.item_name}}</li>
                                                            {% endfor %}
                                                        </ul>
                                                        
                                                    </div>
                                                </div>
                                                <a href="#">
                                                    <button type="button" class="btn btn-outline-warning ms-1" data-target="#newItem" data-toggle="modal">+</button>
                                                </a>
                                            </div>
                                        
                                        </td>
                                        <td>
                                            <input type="hidden" name="item_id[]" id="itemId1">
                                            <input type="text" name='hsn[]' id="hsn1" placeholder='HSN' class="form-control bg-black text-white HSNCODE" readonly />
                                        </td>
                                        <td >
                                            <input type="number" name='qty[]' id="qty1"  class="form-control bg-black text-white qty mb-1" step=0 min=1 value=0 onchange="changeItemQty(this.id)" required/>
                                            <input type="text" id="avl1" style="display: none;">
                                            <div class="d-flex text-white" style="font-size: 0.7rem;"><span>Available Qty:</span><span id="qtyspan1" class=''></span></div>
                                        </td>
                                        <td>
                                            <input type="number" name='price[]' id="price1" class="form-control bg-black text-white price" step="0.00" min="0" style="display: block;" value=0 readonly />
                                            <input type="number" name='priceListPrice[]' id="priceListPrice1" class="form-control bg-black text-white priceListPrice" step="0.00" min="0" style="display: none;" value=0 readonly />
                                        </td>
                                        
                                        <td>
                                            <!-- <input type="text"  id="select_tax" placeholder="Tax Rate" class="form-control seltax d-flex"> -->
                                            <select name='taxGST[]' id="taxGST1" class="form-control bg-black text-white tax_ref tax_ref_gst" style="display: block;" onchange="taxchange(this.id)">
                                                <option selected disabled hidden>Select GST</option>
                                                <option value=28 >28.0% GST</option>
                                                <option value=18 >18.0% GST</option>
                                                <option value=12 >12.0% GST</option>
                                                <option value=5 >05.0% GST</option>
                                                <option value=3 >03.0% GST</option>
                                                <option value=0 >0.0% GST</option>
                                            </select>
                                            <select name='taxIGST[]' id="taxIGST1" class="form-control bg-black text-white tax_ref tax_ref_igst" style="display: none;" onchange="taxchange(this.id)">
                                                <option selected disabled hidden >Select IGST</option>
                                                <option value=28 >28.0% IGST</option>
                                                <option value=18 >18.0% IGST</option>
                                                <option value=12 >12.0% IGST</option>
                                                <option value=5 >05.0% IGST</option>
                                                <option value=3 >03.0% IGST</option>
                                                <option value=0 >0.0% IGST</option>
                                            </select>
                                            <div class="mt-1" style=" text-align: center;color: red;" ><span id="invalidtax1" style="display: none;"> Invalid Tax %</span> </div>    
                                        </td>
                                        <td >
                                            <input type="number" name='discount[]'  placeholder='Enter Discount' id="disc1" value=0 class="form-control bg-black text-white disc" step='any' min=0  />
                                        </td>
            
                                        <td><input type="number" name='total[]' id="total1" class="form-control bg-black text-white total" value=0 readonly /></td>
                                        <td style="display: none;"><input type="hidden" id="taxamount1" class="form-control itemTaxAmount" /></td>
                                        <td>
                                          <i class="fa fa-trash text-danger remove_row" style="cursor: pointer;" title="Remove Row" id="1"></i>
                                        </td>
                                    </tr>
                                </tbody>
                                <tr>
                                    <td colspan="9"><a class="btn btn-outline-warning ms-1" role="button" id="add" >+</a></td>
                                </tr>
                              </table>
                            </div>
                          </div>
                          <script>

function refreshTax(){
        var cmpState = $('#cmpstate').val();
        var plc = $('#placeOfSupply').val();
        if(cmpState == plc){
            $('.tax_ref').css('display','none');
            $('.tax_ref_gst').css('display','block');
            document.getElementById('taxamountCGST').style.display = 'flex';
            document.getElementById('taxamountSGST').style.display = 'flex';
            document.getElementById('taxamountIGST').style.display = 'none';
        }else{
            $('.tax_ref').css('display','none');
            $('.tax_ref_igst').css('display','block');
            document.getElementById('taxamountCGST').style.display = 'none';
            document.getElementById('taxamountSGST').style.display = 'none';
            document.getElementById('taxamountIGST').style.display = 'flex';
        }
    }
                        
                            function getItemDetails(inpId, value){
                        
                                  var itm = value;
                                  var exists = false;
                                  var plc = $('#placeOfSupply').val();
                                  $('#items-table-body tr').each(function () {
                                      var html = $(this).html();
                                      if (html != '') {
                                          var itemName = $(this).find('.item-display').val();
                                          console.log(itm,itemName);
                                          if(itemName == itm){
                                              exists = true;
                                              console.log('exists',exists);
                                          }
                                      }
                                  });
                                  console.log('status',exists);
                        
                                    if(plc != ""){
                                      var n = inpId.slice(4);
                                          $.ajax({
                                              url: "{% url 'getItemDetailsAjax3' %}",
                                              type : 'GET',
                                              data:{
                                                  item : value,
                                                  
                                                  csrfmiddlewaretoken: '{{ csrf_token }}'
                                                  },
                                              
                                              success: function(response) {
                                                  if (response.status){
                                                      $('#'+inpId).val(value);
                                                      document.getElementById('itemId'+n).value = response.id;
                                                      document.getElementById('hsn'+n).value = response.hsn;
                                                      document.getElementById('qtyspan'+n).innerHTML = response.avl;
                                                      document.getElementById('avl'+n).innerHTML = response.avl;
                                                      document.getElementById('price'+n).value = response.sales_rate;
                                                      
                                                      document.getElementById('taxGST'+n).value = response.gst;
                                                      document.getElementById('taxIGST'+n).value = response.igst;
                                                      refreshTax();
                                                      calc();
                                                      
                                                  }
                                              },
                                          });
                                          
                                }else{
                                    alert('Select Place of Supply.!')}
                              }

                              function changeItemQty(id){
        id_val = id.slice(3)
        var qty = document.getElementById(id).value;
        var avl_val = document.getElementById(`avl${id_val}`).innerText;
    
        if( parseInt(qty) > parseInt(avl_val) ){
            alert("Quantity Greater than Available Quantity")
            document.getElementById(id).value = avl_val;
            calc()
        }else{
            document.getElementById(`qtyspan${id_val}`).textContent = parseInt(avl_val) - parseInt(qty);
        }
    }

    $(document).ready(function(){
        $('#items-table-body').on('keyup change', function () {
            refreshTax();
            calc();
        });
    });

    $(document).ready(function(){
        $(document).on("blur", ".disc", function(){
            if($(this).val() != ""){
            }else{
            $(this).val(0);
            calc();
            }
        }); 
    });




    function calc() {
      $('#invoiceItemsTable tbody tr').each(function () {
        var html = $(this).html();
        if (html != '') {
          var qty = $(this).find('.qty').val();
          
          var price = $(this).find('.price').val();
          
          var dis = $(this).find('.disc').val();
          var bc = $("#placeOfSupply").val();
          var compstate = $("#cmpstate").val();

          if(bc==compstate){
              var tax = $(this).find('.tax_ref_gst').val();
          }
          else{
              var tax = $(this).find('.tax_ref_igst').val();
          }
          $(this).find('.total').val((parseFloat(qty) * parseFloat(price)) - parseFloat(dis));
          $(this).find('.itemTaxAmount').val(((qty * price)-dis) * (tax / 100));
          calc_total();
        }
      });
    }



                            
      function refreshIndex(){
      var slNo = 1;
      var $rows = $("#items-table-body tr");

      for (var i = 0; i < $rows.length; i++) {
          $rows.eq(i).attr('id', 'tab_row'+slNo)
          $rows.eq(i).find('[id]').each(function() {
              var oldId = $(this).attr('id');
              var newId = oldId.replace(/\d+/, slNo);
              $(this).attr('id', newId );
          });

          $rows.eq(i).find('.nnum').text(slNo);
          slNo++;
      }
    }

    $(document).on('click','.remove_row',function(){
      var row_id = $(this).attr("id");
      $('#tab_row'+row_id+'').remove();
      refreshIndex();
      calc();
    });

    $(document).ready(function(){
      $('#add').click(function(){
        var roinc = $("#items-table-body tr").length;
        roinc++
        $('#items-table-body').append(
            `
            <tr id='tab_row${roinc}'>
              <td class="nnum  bg-black text-white" style="text-align: center;">${roinc}</td>
              <td>
                  <div class="d-flex">
                      <div class="w-100">
                          <div class="p-0 border-0 bg-none position-relative drop-box" style="display: block;">
                              <input required type="text" id="item${roinc}" value="" name="item_name[]" class="dropdown-toggle form-control text-white item-display" onkeyup="filterFunction($(this).attr('id'))"  data-bs-toggle="dropdown" aria-expanded="false" placeholder="Items.." autocomplete="off">
                              <ul class="dropdown-menu w-100 items-available position-absolute bg-black text-white" id="menu${roinc}"  style="overflow-y: auto; height: fit-content;max-height: 40vh; border: 1px solid gray;"> 
                                  {% for i in items %}
                                  <li class="dropdown-item items-options text-white" onclick="getItemDetails($(this).parent().prev().attr('id'),'{{i.item_name}}')">{{i.item_name}}</li>
                                  {% endfor %}
                              </ul>
                              
                          </div>
                      </div>
                      <a href="#">
                          <button type="button" class="btn btn-outline-warning ms-1" data-target="#newItem" data-toggle="modal">+</button>
                      </a>
                  </div>
              
              </td>
              <td>
                  <input type="hidden" name="item_id[]" id="itemId${roinc}">
                  <input type="text" name='hsn[]' id="hsn${roinc}" placeholder='HSN' class="form-control bg-black text-white HSNCODE" readonly />
              </td>
              <td >
                  <input type="number" name='qty[]' id="qty${roinc}"  class="form-control bg-black text-white qty mb-1" step=0 min=1 value=0 onchange="changeItemQty(this.id)" required/>
                  <input type="text" id="avl${roinc}" style="display: none;">
                  <div class="d-flex text-white" style="font-size: 0.7rem;"><span>Available Qty:</span><span id="qtyspan${roinc}" class=''></span></div>
              </td>
              <td>
                  <input type="number" name='price[]' id="price${roinc}" class="form-control bg-black text-white price" step="0.00" min="0" style="display: block;" value=0 readonly />
                  <input type="number" name='priceListPrice[]' id="priceListPrice${roinc}" class="form-control bg-black text-white priceListPrice" step="0.00" min="0" style="display: none;" value=0 readonly />
              </td>
              
              <td>
                  <select name='taxGST[]' id="taxGST${roinc}" class="form-control bg-black text-white tax_ref tax_ref_gst" style="display: block;" onchange="taxchange(this.id)">
                      <option selected disabled hidden>Select GST</option>
                      <option value=28 >28.0% GST</option>
                      <option value=18 >18.0% GST</option>
                      <option value=12 >12.0% GST</option>
                      <option value=5 >05.0% GST</option>
                      <option value=3 >03.0% GST</option>
                      <option value=0 >0.0% GST</option>
                  </select>
                  <select name='taxIGST[]' id="taxIGST${roinc}" class="form-control bg-black text-white tax_ref tax_ref_igst" style="display: none;" onchange="taxchange(this.id)">
                      <option selected disabled hidden >Select IGST</option>
                      <option value=28 >28.0% IGST</option>
                      <option value=18 >18.0% IGST</option>
                      <option value=12 >12.0% IGST</option>
                      <option value=5 >05.0% IGST</option>
                      <option value=3 >03.0% IGST</option>
                      <option value=0 >0.0% IGST</option>
                  </select>
                  <div class="mt-1" style=" text-align: center;color: red;" ><span id="invalidtax${roinc}" style="display: none;"> Invalid Tax %</span> </div>    
              </td>
              <td >
                  <input type="number" name='discount[]'  placeholder='Enter Discount' id="disc${roinc}" value=0 class="form-control bg-black text-white disc" step='any' min=0  />
              </td>

              <td><input type="number" name='total[]' id="total${roinc}" class="form-control bg-black text-white total" value=0 readonly /></td>
              <td style="display: none;"><input type="hidden" id="taxamount${roinc}" class="form-control itemTaxAmount" /></td>
              <td>
                <i class="fa fa-trash text-danger remove_row" style="cursor: pointer;" title="Remove Row" id="${roinc}"></i>
              </td>
          </tr>
            `);
            reloadItems();
        });
    });   
                                            
    </script>


<div class="row clearfix" style="margin-top:20px">
  <div class="col-md-6">
      <textarea class="form-control bg-black text-white mt-3"  id="" name="note" placeholder="Note" style="height: 190px;"></textarea>
      <input type="file" class="form-control" name="file"  style="margin-top: 10px;">
      <textarea class="form-control bg-black text-white mt-3"  id="" name="terms" placeholder="Terms & conditions" style="height: 130px;"></textarea>
  </div>            
  <div class="col-md-1"></div>
  <div class="col-md-5 table-responsive-md mt-3 " id="invoiceItemsTableTotal" style="background-color:rgba(0,0,0,.4); border: 1px solid rgba(128, 128, 128, 0.6); margin-left: -2vh;">
      <div class="p-3">
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label class="text-center text-white">Sub Total</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" step="any" name='subtotal' value=0.00 readonly class="form-control bg-black text-white" id="sub_total"></div>
          </div>
          <div class="row container-fluid p-2 m-0" id="taxamountIGST" style="display: flex;">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">IGST</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" name='igst' step="any" id="igstAmount" value=0.00 readonly class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0" style="display: none;" id="taxamountCGST">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">CGST</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" name='cgst' step="any" id="cgstAmount" value=0.00 readonly class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0" style="display: none;" id="taxamountSGST">
              <div class="col-sm-4 mt-2"><label for="a" class="text-cente text-white">SGST</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" name='sgst' step="any" id="sgstAmount" value=0.00 readonly class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Tax Amount</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" step="any" name='taxamount' id="tax_amount" value=0.00 readonly class="form-control bg-black text-white"/></div>
          </div>
          
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Ship Charge</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" step="any" name='ship' id="ship" value=0.00 class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Adjustment</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" step="any" name='adj' id="adj" value=0.00 class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Grand Total</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" name='grandtotal' id="grandtotal" value=0.00 readonly class="form-control bg-black text-white"/></div>
          </div>
      </div>
  </div>
</div>
<div class="row">
  <div class="col-md-7"></div>
  <div class="col-md-5 table-responsive-md mt-3 " id="invoiceItemsTablePaid" style="background-color:rgba(0,0,0,.4); border: 1px solid rgba(128, 128, 128, 0.6); margin-left: -2vh;">
      <div class="p-3">
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Paid Off</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" step="any" name='advance' id="advance"  value=0.00 class="form-control bg-black text-white"/></div>
          </div>
          <div class="row container-fluid p-2 m-0">
              <div class="col-sm-4 mt-2"><label for="a" class="text-center text-white">Balance</label></div>
              <div class="col-sm-1 mt-2">:</div>
              <div class="col-sm-7 mt-2"><input type="number" name='balance' id="balance" value=0.00 readonly class="form-control bg-black text-white" readonly /></div>
          </div>
      </div>
  </div>
</div>
  




  <br>
  <div class="mt-4">
    <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="agreeTerms" required>
        <label for="agreeTerms">Agree to terms and conditions</label>
        <div class="invalid-feedback">You must agree before submitting.</div>
    </div>
  </div>
  <div class="mt-4">
    <input type="submit" class="btn save_btn" style="background-color: chocolate; color: white;" value="SAVE" name="Saved" id="save">
    <input class="btn save_btn" style="background-color: chocolate; color: white;" type="submit" value="DRAFT" name="Draft" id="draft">
    <input class="btn save_btn" style="background-color: chocolate; color: white;" type="reset" onclick="window.location.href=`{% url 'recurringInvoice' %}`" value="CANCEL" id="cancel">
  </div>
</form>
</div>
</div>
</div>
</div>
</div>

<script>
function calc_total() { 
      total = 0;
      $('.total').each(function () {
          total += parseFloat($(this).val());
      });
      taxamount = 0;
      $('.itemTaxAmount').each(function () {
          taxamount += parseFloat($(this).val());
      });
      $('#sub_total').val(total.toFixed(2));
      $('#tax_amount').val(taxamount.toFixed(2));
      var ship = parseFloat($("#ship").val());
      var adj_val = parseFloat($('#adj').val())
      var gtot = taxamount + total + ship + adj_val;

      $('#grandtotal').val(gtot.toFixed(2));
      
      var adv_val = parseFloat($('#advance').val())
      var bal = gtot - adv_val
      $('#balance').val(bal.toFixed(2));
      splitTax();
    }


    function splitTax(){
    var bc = $("#placeOfSupply").val();
    var compstate = $("#cmpstate").val();
    d=0
    if (bc == compstate  ) {
        var gst = taxamount/2
        $('#cgstAmount').val(parseFloat(gst.toFixed(2)));
        $('#sgstAmount').val(parseFloat(gst.toFixed(2)));
        $('#igstAmount').val(parseFloat(d.toFixed(2)));
    }else{
        $('#igstAmount').val(taxamount.toFixed(2));
        $('#cgstAmount').val(d.toFixed(2));
        $('#sgstAmount').val(d.toFixed(2));
    }   
  }

    $(document).ready(function(){
      $(document).on('keyup',"#ship",function(){
          var subtot = $('#sub_total').val();
          var tax = $('#tax_amount').val();
          var sh = $("#ship").val();
          var adj = $("#adj").val();
          $('#grandtotal').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)+parseFloat(adj)).toFixed(2));
          $('#balance').val((parseFloat($("#grandtotal").val())-parseFloat($("#advance").val())).toFixed(2))
          
      });

      $(document).on("blur", "#ship", function(){
          if($(this).val() != ""){
          }else{
          $(this).val(0);
          calc_total();
          }
      }); 
    });

    $(document).ready(function(){
      $(document).on("keyup", "#adj", function(){
          var subtot = $('#sub_total').val();
          var tax = $('#tax_amount').val();
          var sh = $("#ship").val();
          var adj = $("#adj").val();
          $('#grandtotal').val((parseFloat(subtot)+parseFloat(tax)+parseFloat(sh)+parseFloat(adj)).toFixed(2));
          $('#balance').val((parseFloat($("#grandtotal").val())-parseFloat($("#advance").val())).toFixed(2))
      });

      $(document).on("blur", "#adj", function(){
          if($(this).val() != ""){
          }else{
          $(this).val(0);
          calc_total();
          }
      }); 
    });

    $(document).ready(function() {
      $("#advance").on('keyup change',function() {
          var tot_val = $('#grandtotal').val();
          var adv_val = $('#advance').val();
          if(adv_val !=""){
              if (parseFloat(tot_val) < parseFloat(adv_val)){
                  $('#advance').val(parseFloat(tot_val))
                  $('#balance').val(0);
                  alert("Advance Greater than Total Amount")
      
              }else{
                  var bal = parseFloat(tot_val) - parseFloat(adv_val)
                  $('#balance').val(bal.toFixed(2));
              }
          }else{
              $('#balance').val(parseFloat(tot_val));
          }
          
      })
    });

</script>
    
<!-- New item Modal -->
    <div class="modal fade" id="newItem">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header px-3" style="background: rgb(32, 35, 37);">
              <h3 class="text-uppercase" style="color: white;">Add New Item</h3>
              <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card px-2 py-4" style="background-color: #000;">
              <form id="newItemForm">
                {% csrf_token %}
                <fieldset class="form-group" >
                      <div class="row mt-3">
                      <hr>
                          <div class="col-12 col-md-10">
                          <label class="col-12 col-md-2 col-form-label pt-3" style="color: aliceblue;">Type  &nbsp;&nbsp;<i class="fa fa-question-circle"></i></label>
                              <div class="form-check form-check-inline">
                                  <input required class="form-check-input" type="radio" name="itemType" id="gridRadios1" value="Goods">
                                  <label class="form-check-label text-white" for="gridRadios1">Goods</label>
                              </div> &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                              <div class="form-check form-check-inline ml-md-3">
                                  <input required class="form-check-input" type="radio" name="itemType" id="gridRadios2" value="Services">
                                  <label class="form-check-label text-white" for="gridRadios2">Services</label>
                              </div>
                          </div>
                      </div>
                  </fieldset>
                  <div class="form-group row mt-3">
                      <label  class="col-sm-2 col-form-label " style="color: aliceblue;">Name *</label>
                      <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                        <input required type="text" class="form-control" name="name" id="nameInput" style="color: aliceblue;" placeholder="Enter Item Name">  
                      </div>
                  </div>
                  <div class="form-group row mt-3">
                      <label class="col-sm-2 col-form-label" style="color: aliceblue;">Unit <i class="fa fa-question-circle"></i></label>
                      <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                          <div class="d-flex align-items-center">
                              <select name="unit" class="form-control bg-black text-white" id="selunit"  >
                                {% for i in units %}
                                  <option value={{i.id}}>{{i.unit_name}}</option>
                                {% endfor %}
                              </select>                      
                              <a class="btn btn-outline-warning py-2 ms-1" style="cursor: pointer;" data-toggle="modal" data-target="#unitmodal" style="height: 38px;">+</a>
                          </div>
                      </div>
                  </div>
  
                  <div class="form-group row mt-3">
                      <label class="col-sm-2 col-form-label" style="color: aliceblue;">HSN Code</label>
                      <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                          <input required type="text" class="form-control" name="hsn" required id="myInputField" style="color: aliceblue;" placeholder="Enter six digit HSN code" oninput="validateInput()">
                          <div id="validationResult"></div>
                      </div>
                  </div>
                  <fieldset class="form-group mt-3" >
                      <div class="row">
                    
                          <div class="col-12 col-md-10">
                            <label class="col-12 col-md-2 col-form-label pt-3" style="color: aliceblue;">Tax Preference: &nbsp;&nbsp;</label>
                              <div class="form-check form-check-inline">
                                  <input required class="form-check-input" type="radio" name="radio" id="gridRadios3" onclick="showAllSelect()" value="taxable">
                                  <label class="form-check-label text-white" for="gridRadios3">Taxable</label>
                              </div> &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                              <div class="form-check form-check-inline ml-md-3">
                                  <input required class="form-check-input" type="radio" name="radio" id="gridRadios4"  onclick="hideAllSelect()" value="None-Taxable">
                                  <label class="form-check-label text-white" for="gridRadios4"> None-Taxable</label>
                              </div>
                          </div>
                      </div>
                  </fieldset>
  
                  <div class="row mt-3">
                      <div class="col-md-3">
                          <div id="select1_div" style="display: none;">
                              <label for="select1">Intra-State TAX</label><br> <br>
                              <select name="intra" class="form-control" id="intraStateTax" style="background-color: black; color: white;">
                                  <option value="0">GST0[0%]</option>
                                  <option value="3">GST3[3%]</option>
                                  <option value="5">GST5[5%]</option>
                                  <option value="12">GST12[12%]</option>
                                  <option value="18">GST18[18%]</option>
                                  <option value="28">GST28[28%]</option>
                              </select>
                          </div>
                      </div>
                      <div class="col-md-6">
                          <div id="select2_div" style="display: none;">
                              <label for="select2">Inter-State TAX</label> <br><br>
                              <select name="inter" class="form-control " id="interStateTax" style="background-color: black; color: white;">
                                  <option value="0">IGST0[0%]</option>
                                  <option value="3">IGST3[3%]</option>
                                  <option value="5">IGST5[5%]</option>
                                  <option value="12">IGST12[12%]</option>
                                  <option value="18">IGST18[18%]]</option>
                                  <option value="28">IGST28[28%]</option>
                              </select>
                          </div>
                      </div>
                    </div>
                  
                    <div class="row mt-3">
                      <div class="col-md-6">
                        <input  type="checkbox" name="selling" checked> <label >selling  information</label><br><br>
                        <div class="form-group row mt-3">
                          <label class="col-4 col-form-label" style="color: aliceblue;">Selling price </label>
                          <div class="col-sm-8 col-md-8 col-8">
                            <div class="input-group mb-2">
                              <div class="input-group-prepend">
                                <div class="input-group-text text-white" style="background-color: black;">INR</div>
                              </div>
                              <input required type="text" id="salesprice" name="sel_price" style="color: #ede4e4;" class="form-control">
                            </div>
                          </div>
                        </div>
  
                        <div class="form-group row mt-3">
                          <label  class="col-4 col-form-label" style="color: aliceblue;">Account *</label>
                          <div class="col-sm-18 col-md-8 col-8">
                            <select name="sel_acc" class="form-control " id="salesAccount" style="background-color: black; color: white;">
                              <option value=" ">--Select Account--</option>
                              <option value="General Income">General Income</option>
                              <option value="Interest Income">Interest Income</option>
                              <option value="Late Fee  Income">Late Fee  Income</option>  
                              <option value="Discount Income">Discount Income</option>
                              <option value="Other Charges">Other Charges</option>
                              <option value="Shipping Charge">Shipping Charge</option>
                          
                            </select>                              
                          </div>
                        </div>
                        <div class="form-group row mt-3">
                          <label  class="col-4 col-form-label" style="color: aliceblue;">Description </label>
                          <div class="col-sm-18 col-md-8 col-8">
                            <input  type="text" id="salesDescription" style="color: #ede4e4;" name="sel_desc" class="form-control " placeholder="Enter Discription">
                          </div>
                        </div>
                                              
                      </div>
                      <div class="col-md-6">
                        <input type="checkbox" name="purchase" checked> <label for="">Purchase information</label><br><br>
                        <div class="form-group row mt-3">
                          <label  class="col-4 col-form-label" style="color: aliceblue;">Cost Price*</label>
                          <div class="col-sm-8 col-md-8 col-8">
                            <div class="input-group mb-2">
                              <div class="input-group-prepend">
                                <div class="input-group-text text-white" style="background-color: black;">INR</div>
                              </div>
                              <input required type="text" id="purprice" style="color: #ede4e4;" class="form-control " name="cost_price" >
                            </div>
                          </div>
                        </div>
                        <div class="form-group row mt-3 in">
                
                          <label class="col-4 col-form-label" style="color: aliceblue;">Account*</label>
                          <div class="col-sm-8 col-md-8 col-8">
                              <div class="d-flex align-items-center">
                                  <select name="cost_acc" class="form-control text-white bg-black" id="myaccount" required>
                                    <option value="">--Select Account--</option>
                                    <optgroup id="expensesel" label="Expense">
                               
                                    {% for i in accounts %}
        
                                    {% if i.account_type == 'Expense' %}
                                  
                                      <option value="{{i.account_name}}">{{i.account_name}}</option>
                              
                                    {% endif %}
                                    {% endfor %}
                                  </optgroup>
                                  <optgroup id="costofgoods" label="Cost Of Goods Sold">
                                    {% for i in accounts %}
                                    {% if i.account_type == 'Cost Of Goods Sold' %}
                              
                                      <option value="{{i.account_name}}">{{i.account_name}}</option>
                                      
                                      {% endif %}
                                      {% endfor %}
                                    </optgroup>
                                    <optgroup id="otherexpensesel" label="Other Expense">
                                    {% for i in accounts %}
                                    {% if i.account_type == 'Other Expense' %}
                              
                                      <option value="{{i.account_name}}">{{i.account_name}}</option>
                                      
                                      {% endif %}
                                      {% endfor %}
                                    </optgroup>
                        
                                   
                                
                                  </select>                    
                                  <a class="btn btn-outline-warning py-2 ms-1" style="cursor: pointer;" data-toggle="modal" data-target="#newAccount" style="height: 38px;">+</a>
           
                              </div>
                             
                          </div>
                      </div>
                      <div class="form-group mt-3 row in">
                          <label class="col-4 col-form-label" style="color: aliceblue;">Description</label>
                          <div class="col-sm-8 col-md-8 col-8">
                              <div class="d-flex align-items-center">
                                  <input  type="text" style="color: #ede4e4;" name="pur_desc" id="purchaseDescription" class="form-control " placeholder="Enter Discription">
                              </div>
                          </div>
                      </div>
                      </div>
                  </div>
  
                  <div class="form-group row mt-3">
                      <label class="col-sm-4 col-form-label" style="color: aliceblue;">Minimum Stock to maintain :</label>
                      <div class="col-sm-8 col-md-8 col-8 d-flex align-items-center">
                        <input type="number" style="color: #ede4e4;" id="minStock" name="minimum_stock" class="form-control mx-auto" placeholder="Enter Minimum Stock">
                      </div>
                  </div>
  
                  <div class="row mt-3" >
                      <div class="col-md-10">
                        {% comment %} <label style="color: aliceblue;"><input type="checkbox" value="trackstate" name="trackstate" onclick="toggleForm()" style="display: none;">
                       Track Inventory for this item</label> {% endcomment %}
                        <!-- {% comment %} <input type="checkbox" name="trackState" id="trackStateCheckbox">{% endcomment %} -->
                        <label style="color: aliceblue;">
                       
                          <input type="checkbox" name="trackstate" class=" " id="trackInv"  onclick="toggleFormFields()">
                          Track Inventory for this item
                        </label>   <br>   <br>
                        <div id="formFields" style="display: none;"> 
                          <div class="form-group row" >
                            <label class="col-sm-2 col-form-label" style="color: aliceblue;">Inventory Account *</label>
                            <div class="col-sm-10 col-md-7 col-9" style="margin-left: -1rem;">
                              <select class="form-select form-select-sm mt-3 " id="invAcc" name="invacc" style="background-color: black; color: white;">
                                <option value="">Choose..</option>
                                <option value="inventory assets">Inventory Asset</option>
                              </select>
                            </div>
                          </div>
                          <br>
                          <div class="form-group row ">
                            <label class="col-sm-2 col-form-label" style="color: aliceblue;">Opening Stock</label>
                            <div class=" col-md-5">
                              <input  type="number" style="color: #ede4e4;" class="form-control " id="stockOnHand" name="openstock" value="0">
                            </div>
                            </div>
                            <br>
                            <div class="form-group row ">
                                <label class="col-sm-2 col-form-label" style="color: aliceblue;">Opening Stock Rate per Unit</label>
                                <div class=" col-md-5">
                                    <input type="number" id="stockRate" style="color: #ede4e4;" class="form-control" name="rate"  value="0">
                                </div>
                                </div>
      
                          </div>
                      </div>
                  </div>
              
              </form>
              <div class="row mt-5">
                  <div class="col-lg-12 col-md-12 col-sm-12">
                  <div class="d-flex justify-content-center">
                      <button class="btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning" type="button" id="saveNewItem">Save</button>
                      <button type="button" class="close btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning close_item_modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Cancel</span></button>
                  </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>  
  </div>

<!-- New Unit Modal-->   
  <div class="modal fade" id="unitmodal">
    <div class="modal-dialog">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header" style="background: rgb(32, 35, 37);">
            <h5 class="m-3 text-uppercase" id="shareBillEmailLabel" style="color: #eeeaea;">Add Unit</h5>
            <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3" style="background-color: #000;">
            
                <div id="error-message-container" style="color: chocolate;"></div>
                    <form class="needs-validation" novalidate autocomplete="off" id="unitform">
                        {% csrf_token %}
                        <label class="text-dark" for="unit"><b>Unit Name</b></label>
                        <input type="text" class="form-control text-white"  placeholder="Enter unit" id="unitName" name="unit_name" required>
                        <p class="text-white">eg:KL,PCS,BOX,LTR</p>

                        <div class="row mt-5">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="d-flex justify-content-center">
                                <button class="btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning" type="button" id="newUnitSave">Save</button>
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-25 my-1 mx-1 btn-outline-warning close_unit_modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Cancel</span></button>
                            </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

                        
                        
  <script>
    $(document).ready(function() {
        $('#myaccount').selectize();
    });
    $(document).ready(function() {
        $('#selunit').selectize();
    });

    $(document).on("click", "#newUnitSave", function(event) {
        event.preventDefault(); // Prevent the default form submission
        var uName = $("#unitName").val();
        $.ajax({
          type: 'POST',
          url: "{% url 'add_unit' %}",
          data: {
            units: uName,
            csrfmiddlewaretoken: '{{ csrf_token }}'
          },
          success: function(response) {
            if (response.message === 'success') {
              document.getElementById("unitform").reset();
              if($('#unitmodal').hasClass('show')){
                    $("#unitmodal .close_unit_modal").click()
                }
              reloadUnit(uName);
            } else {
              $("#error-message-container").text("Unit with the same name exists");
            }
          },
        });
      });

      function reloadUnit(unit) {
      
        $.ajax({
                url: "{% url 'getUnitsAjax' %}",
                type: "GET",
                dataType: "json",
                data: $(this).serialize(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
            
                success: function(data) {
                    var setVal = "";
                    var $select = $(document.getElementById('selunit'));
                    var selectize = $select[0].selectize;
                    $.each(data, function(key, value) {
                        if(unit == value[1]){
                            setVal = value[0]
                        }
                        selectize.addOption({value:value[0],text:value[1]});
                        selectize.addItem(value[0]); 
                    });

                    if(setVal != ""){
                        selectize.setValue(setVal);
                    }
            
                },
        
        });
      }

    function showAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "block";
        select2_div.style.display = "block";
    }

    function hideAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "none";
        select2_div.style.display = "none";
    }

      function toggleFormFields() {
        var formFields = document.getElementById("formFields");
        var checkbox = document.querySelector("input[name=trackstate]");
    
        if (checkbox.checked) {
            formFields.style.display = "block";
        } else {
            formFields.style.display = "none";
        }
        }

        function validateSixDigits(field) {
              // Define the regular expression pattern for exactly six digits
              var pattern = /^\d{6}$/;
      
              // Check if the field matches the pattern
              return pattern.test(field);
          }
      
          function validateInput() {
              var inputField = document.getElementById("myInputField");
              var inputValue = inputField.value;
      
              var validationResultDiv = document.getElementById("validationResult");
      
              if (validateSixDigits(inputValue)) {
                  validationResultDiv.textContent = "Valid";
              } else {
                  validationResultDiv.textContent = "Invalid: The field does not contain six digits.";
              }
          }


$(document).on("click","#saveNewItem",function(){
    var name = $("#nameInput").val();
    var type = $("input[name='itemType']:checked").val();
    var unit = $("#selunit").val();
    var hsn = $("#myInputField").val();
    var purAccount = $("#myaccount").val();
    var trck;
    if($('#trackInv').prop('checked')){
        trck = 1
    }else{
        trck = 0
    }
    if(type == undefined){
        alert('Please select item type')
        return
    }
    if($('#gridRadios3').prop('checked') || $('#gridRadios4').prop('checked')){
        if($('#gridRadios3').prop('checked')){
            var tax = 'taxable'
        }else{
            var tax = 'None-Taxable'
        }
    }else{
        alert("Should select any of tax reference")
        return
    }

    if (name !="" && type !="" && unit != "" && hsn != "" && tax != "" && purAccount != ""){
        $.ajax({
            type : 'POST',
            url:"{% url 'createNewItemAjax' %}",
            data:{
                'name' : name,
                'type' : type,
                'unit' : unit,
                'hsn' : hsn,
                'taxref' : tax,
                'intra_st' : $("#intraStateTax").val(),
                'inter_st' : $("#interStateTax").val(),
                'pcost' : $("#purprice").val(),
                'pur_account' : purAccount,
                'pur_desc' : $("#purchaseDescription").val(),
                'salesprice' : $("#salesprice").val(),
                'sale_account' : $("#salesAccount").val(),
                'sale_desc' : $("#salesDescription").val(),
                'invacc' : $("#invAcc").val(),
                'stock' : $("#stockOnHand").val(),
                'stock_rate' : $("#stockRate").val(),
                'min_stock' : $("#minStock").val(),
                'trackInv' : trck,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            
            success: function(response) {
                if(response.status){
                    console.log("AJAX Success",response)
                    document.getElementById("newItemForm").reset();

                    if($('#newItem').hasClass('show')){
                        $('#newItem .close_item_modal').click()
                    }
                    reloadItems();
                }else{
                    alert(response.message)
                }
            },         
        });
    }
    else{
        alert('Fill all required fields.!')
        return;
    }
});

function reloadItems() {
    $.ajax({
        url: "{% url 'getAllItemsAjax' %}",
        type: "GET",
        dataType: "json",
        data: {},
        csrfmiddlewaretoken: '{{ csrf_token }}',

        success: function(data) {
            $('#items-table-body tr').each(function () {
                var currentRow = $(this);
                var html = currentRow.html();
                
                if (html !== '') {
                    currentRow.find(".items-available").find("li").remove();

                    $.each(data, function(key, value) {
                        console.log(value[1]);
                        currentRow.find(".items-available").append(`<li class="dropdown-item items-options text-white" onclick="getItemDetails($(this).parent().prev().attr('id'),'${value[1]}')">${value[1]}</li>`);
                    });
                }
            });
        },
        error: function(xhr, status, error) {
            console.error(xhr.responseText);
        }

    });
    if ($('#newAccount').hasClass('show')){
        $('#newAccount .close_account_modal').click();
    }

    if ($('#unitmodal').hasClass('show')){
        $('#unitmodal .close_unit_modal').click();
    }
}

      $(document).on("click","#newAccountSave",function(){
            event.preventDefault();

            var acType = $("#soValue1").val();
            var acName = $("#account_name").val();
            var acCode = $("#account_code").val();
            var acDesc = $("#description").val();
            var accNumber = $('#account_number').val();
            var subAcc, parentAcc;
            if(acType == "" || acName == ""){
                alert('Account Name and Type should be entered.')
                return
            }

            if(acType == 'Bank' && accNumber == ""){
                alert('Please enter account number')
                return
            }

            if($('#sub_account').prop('checked')){
                if($('#parent_account').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    console.log('currentvalue == ',$('#parent_account').val())
                    subAcc = $('#sub_account').val()
                    parentAcc = $('#parent_account').val()
                }
            }else if($('#sub_account22').prop('checked')){

                if($('#parent_account22').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account22').val()
                    parentAcc = $('#parent_account22').val()
                }
            }else if($('#sub_account33').prop('checked')){

                if($('#parent_account33').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account33').val()
                    parentAcc = $('#parent_account33').val()
                }
            }else if($('#sub_account44').prop('checked')){

                if($('#parent_account44').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account44').val()
                    parentAcc = $('#parent_account44').val()
                }
            }else if($('#sub_account55').prop('checked')){

                if($('#parent_account55').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account55').val()
                    parentAcc = $('#parent_account55').val()
                }
            }else if($('#sub_account66').prop('checked')){
                if($('#parent_account66').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account66').val()
                    parentAcc = $('#parent_account66').val()
                }

            }else if($('#sub_account77').prop('checked')){
                if($('#parent_account77').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account77').val()
                    parentAcc = $('#parent_account77').val()
                }

            }else if($('#sub_account88').prop('checked')){
                if($('#sub_account88').prop('checked') && $('#parent_account88').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account88').val()
                    parentAcc = $('#parent_account88').val()
                }

            }else if($('#sub_account99').prop('checked')){
                if($('#parent_account99').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account99').val()
                    parentAcc = $('#parent_account99').val()
                }

            }else if($('#sub_account100').prop('checked')){
                if($('#parent_account100').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account100').val()
                    parentAcc = $('#parent_account100').val()
                }

            }else if($('#sub_account111').prop('checked')){
                if($('#parent_account111').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account111').val()
                    parentAcc = $('#parent_account111').val()
                }

            }else if($('#sub_account222').prop('checked')){
                if($('#parent_account222').val() == ""){
                    alert('Select parent account')
                    return
                }else{
                    subAcc = $('#sub_account222').val()
                    parentAcc = $('#parent_account222').val()
                }

            }else{

            }



            console.log(acType, acName, acCode, acDesc)
            console.log('sub', subAcc)
            console.log('parent', parentAcc)

          $.ajax({
            
            type : 'POST',
            url:"{% url 'createNewAccountAjax' %}",
        
            data:{
                
                account_type : acType,
                account_name : acName,
                account_code : acCode,
                description : acDesc,
                account_number : accNumber,
                
                sub_acc : subAcc,
                parent_acc : parentAcc,
         
         
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
              },
              success: function(response) {
            if (response.status) {
              document.getElementById("newAccountForm").reset();
              if($('#newAccount').hasClass('show')){
                    $("#newAccount .close_account_modal").click()
                }
                reloadAccounts(acName)
            } else {
              $("#error-message-container2").text("Account with the same name exists");
            }
          },
      
          });     
        });
        
        
        function reloadAccounts(account) {
            $.ajax({
                url: "{% url 'getAllAccountsAjax' %}",
                type: "GET",
                dataType: "json", 
                data: {},
                
                success: function(data) {
                    var acc = account
                    var setVal = "";
                    var selectize = $('#myaccount').selectize()[0].selectize;
                    selectize.clearOptions();

                    selectize.addOptionGroup('Expense', { label: "Expense" });
                    selectize.addOptionGroup('Cost Of Goods Sold', { label: "Cost Of Goods Sold" });
                    selectize.addOptionGroup('Other Expense', { label: "Other Expense" });

                    $.each(data, function(key, value) {
                        if(account == value[0]){
                            setVal = value[0]
                        }
                        console.log(value[0],value[1])
                        if(value[1] == 'Expense'){
                            selectize.addOption({value:value[0],text:value[0], optgroup: 'Expense'});
                        }else if(value[1] == 'Cost Of Goods Sold'){
                            selectize.addOption({value:value[0],text:value[0], optgroup: 'Cost Of Goods Sold'});
                        }else if(value[1] == 'Other Expense'){
                            selectize.addOption({value:value[0],text:value[0], optgroup: 'Other Expense'});
                        }else{

                        }
                    });
                    selectize.refreshOptions();

                    if(setVal != ""){
                        selectize.setValue(setVal);
                    }
            
                },
                error: function(xhr, status, error) {
                console.error(xhr.responseText);
            
                }
            });
        }

        function toggleBankAcc(){
            var vals = document.getElementById('soValue1').value
            var accountNumberField = document.getElementById("acc_bo_div");
            if (vals === "Bank") {
                accountNumberField.style.display = "block";
            } else {
                accountNumberField.style.display = "none";
            }
        }
    function message() {
        toggleBankAcc()

        var vals = document.getElementById('soValue1').value
        console.log(vals)
        if (vals == "Other Assets") {
            document.getElementById('message_hd').innerHTML = "Assets"
            document.getElementById('message').innerHTML = "Track special assets like goodwill and other intangible assets"
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";

        } else if (vals == "Other Current Assets") {
            document.getElementById('message_hd').innerHTML = "Any short term asset that can be converted into cash or cash equivalents easily<ul style='list-style-type: disc;'><li>Prepaid expenses</li><li>Stocks and Mutual Funds</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account").checked = false;
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term asset that can be converted into cash or cash equivalents easily 
          <ul><li>Prepaid expenses</li> <li>Stocks and Mutual Funds</li></ul>`
            )

        } else if (vals == "Cash") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account22").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div22").style.display = "block";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            $('#message').append(
                `To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.`
            )

        } else if (vals == "Bank") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of bank accounts like Savings, Checking, and Money Market accounts.";

            document.getElementById('').innerHTML = "Assets"
            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "block";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `To keep track of bank accounts like Savings, Checking, and Money Market accounts`
            )

        } else if (vals == "Fixed Asset") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>Any long term investment or an asset that cannot be converted into cash easily like:<ul><li>Land and Buildings</li><li>Plant, Machinery and Equipment</li><li>Computers</li><li>Furniture</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account33").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            $('#message').append(
                `Any long term investment or an asset that cannot be converted into cash easily like: 
          <ul><li>Land and Buildings</li> <li>Plant, Machinery and Equipment</li> <li>Computers</li> <li>Furniture</li></ul>`
            )

        } else if (vals == "Stock") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of your inventory assets.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account44").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "block";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            $('#message').append(
                `To keep track of your inventory assets.`
            )

        } else if (vals == "Payment Clearing") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            $('#message').append(
                `To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.`
            )

        } else if (vals == "Other Current Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Any short term liability like:<ul><li>Customer Deposits</li><li>Tax Payable</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account55").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "block";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term liability like:
          <ul><li>Customer Deposits</li> <li>Tax Payable</li></ul>`
            )

        } else if (vals == "Credit Card") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Create a trail of all your credit card transactions by creating a credit card account.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Create a trail of all your credit card transactions by creating a credit card account`
            )

        } else if (vals == "Long Term Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Liabilities that mature after a minimum period of one year like:<ul><li>Notes Payable</li><li>Debentures</li><li>Long Term Loans</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account66").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("sub_div66").style.display = "block";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Liabilities that mature after a minimum period of one year like Notes Payable, Debentures, and Long Term Loans`
            )

        } else if (vals == "Other Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li><li>Loan to be Repaid</li><li>Accounts Payable</li> etc.</ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account77").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "block";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";


            $('#message').append(
                `Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li> <li>Loan to be Repaid</li> <li>Accounts Payable etc</li> </ul>`
            )

        } else if (vals == "Overseas Tax Payable") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Track your taxes in this account if your business sells digital services to foreign customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `Track your taxes in this account if your business sells digital services to foreign customers.`
            )

        } else if (vals == "Equity") {
            document.getElementById('message_hd').innerHTML = "Equity<br><br>Owners or stakeholders interest on the assets of the business after deducting all the liabilities.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account88").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Owners or stakeholders interest on the assets of the business after deducting all the liabilities`
            )

        } else if (vals == "Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or Revenue earned from normal business activities like sale of goods and services to customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account99").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Income or Revenue earned from normal business activities like sale of goods and services to customers`
            )

        } else if (vals == "Other Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or revenue earned from activities not directly related to your business like :<ul><li>Interest Earned</li><li>Dividend Earned</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Income or revenue earned from activties not directly related to your business like :<ul><li>Interest Earned</li> <li>Dividend Earned</li></ul>`
            )

        } else if (vals == "Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li><li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account100").checked = false;


            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div100").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li> <li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>`
            )

        } else if (vals == "Cost Of Goods Sold") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li><li>Cost of obtaining raw materials</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account111").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div111").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li> <li>Cost of obtaining raw materials</li></ul>`
            )

        } else if (vals == "Other Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Track miscellaneous expenses incurred for activities other than primary business operations or create additional accounts to track default expenses like insurance or contribution towards charity.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account222").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div222").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for activities unrelated to primary business operations like :<ul><li>Bad debts</li> <li>Contributions Towards Charity</li><li>Insurance</li></ul>`
            )

        }




    };

    function filterFunction1() {
        var input, filter, ul, li, a, i, b, j;
        input = document.getElementById("myInput1");
        filter = input.value.toUpperCase();
        div = document.getElementById("myDropdown1");
        a = div.getElementsByClassName('opt');
        // a = div.getElementsByTagName('div');

        b = div.getElementsByTagName('li');

        for (i = 0; i < a.length; i++) {
            txtValue = a[i].textContent || a[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                a[i].style.display = "";
            }
            else {
                a[i].style.display = "none";
            }
        }
        for (j = 0; j < b.length; j++) {
            txtValue = b[j].textContent || b[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                b[j].style.display = "";
            }
            else {
                b[j].style.display = "none";
            }
        }

    }

    function show_parent() {

var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Current Assets") {

    var chk = document.getElementById("sub_account").checked;


    if (chk == true) {
        document.getElementById("parent_div").style.display = "block";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";



    } else {
        document.getElementById("parent_div").style.display = "none";
    }
}
}

function show_parent22() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Cash") {
    var chk = document.getElementById("sub_account22").checked;
    if (chk == true) {
        document.getElementById("parent_div22").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    }
    else {
        document.getElementById("parent_div22").style.display = "none";
    }
}

}

function show_parent33() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Fixed Asset") {
    var chk1 = document.getElementById("sub_account33").checked;
    if (chk1 == true) {
        document.getElementById("parent_div33").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";

    }
    else {
        document.getElementById("parent_div33").style.display = "none";
    }
}

}

function show_parent44() {

var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Stock") {
    var chk = document.getElementById("sub_account44").checked
    if (chk == true) {
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div44").style.display = "block";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";

    } else {
        document.getElementById("parent_div44").style.display = "none";
    }
}
}


function show_parent55() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Current Liability") {
    var chk = document.getElementById("sub_account55").checked
    if (chk == true) {
        document.getElementById("parent_div55").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div55").style.display = "none";
    }
}
}

function show_parent66() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Long Term Liability") {
    var chk = document.getElementById("sub_account66").checked
    if (chk == true) {
        document.getElementById("parent_div66").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div66").style.display = "none";
    }
}
}

function show_parent77() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Other Liability") {
    var chk = document.getElementById("sub_account77").checked
    if (chk == true) {
        document.getElementById("parent_div77").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div77").style.display = "none";
    }
}
}

function show_parent88() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Equity") {
    var chk = document.getElementById("sub_account88").checked
    if (chk == true) {
        document.getElementById("parent_div88").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div88").style.display = "none";
    }
}
}

function show_parent99() {
var vals = document.getElementById('soValue1').value;
console.log(vals);
if (vals == "Income") {
    var chk = document.getElementById("sub_account99").checked
    if (chk == true) {
        document.getElementById("parent_div99").style.display = "block";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";
    } else {
        document.getElementById("parent_div99").style.display = "none";
    }
}
}

function show_parent100() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Expense") {
    var chk = document.getElementById("sub_account100").checked;
    if (chk == true) {
        document.getElementById("parent_div100").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";


    } else {
        document.getElementById("parent_div100").style.display = "none";
    }
}
}

function show_parent111() {
var vals = document.getElementById('soValue1').value;
console.log(vals);


if (vals == "Cost Of Goods Sold") {
    var chk = document.getElementById("sub_account111").checked
    if (chk == true) {
        document.getElementById("parent_div111").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div222").style.display = "none";


    } else {
        document.getElementById("parent_div111").style.display = "none";
    }
}
}

function show_parent222() {
var vals = document.getElementById('soValue1').value;
console.log(vals);

if (vals == "Other Expense") {
    var chk = document.getElementById("sub_account222").checked;
    if (chk == true) {
        document.getElementById("parent_div222").style.display = "block";
        document.getElementById("parent_div66").style.display = "none";
        document.getElementById("parent_div99").style.display = "none";
        document.getElementById("parent_div55").style.display = "none";
        document.getElementById("parent_div44").style.display = "none";
        document.getElementById("parent_div33").style.display = "none";
        document.getElementById("parent_div22").style.display = "none";
        document.getElementById("parent_div").style.display = "none";
        document.getElementById("parent_div77").style.display = "none";
        document.getElementById("parent_div88").style.display = "none";
        document.getElementById("parent_div100").style.display = "none";
        document.getElementById("parent_div111").style.display = "none";


    } else {
        document.getElementById("parent_div222").style.display = "none";
    }
}
}
</script>                
                        
                        
                        
                        
                        
                        
                        
                        
                        
                
  </div>
</div>

<script>
  
</script>

{%endblock%}