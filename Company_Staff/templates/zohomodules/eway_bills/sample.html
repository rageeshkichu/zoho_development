function changePlaceOfSupply() {
        var placeOfSupply = document.getElementById("placeOfSupply").value;
        var cmpState = document.getElementById("cmpstate").value;
    
        // Get all rows in the table body
        var rows = document.querySelectorAll("#items-table-body tr");
    
        // Loop through each row and update tax dropdowns
        rows.forEach(function(row) {
            var taxGST = row.querySelector(".tax_ref_gst");
            var taxIGST = row.querySelector(".tax_ref_igst");
    
            if (placeOfSupply === "") {
                taxGST.style.display = "block";
                taxIGST.style.display = "none";
            } else if (cmpState === placeOfSupply) {
                // If cmpState is equal to placeOfSupply, display GST and hide IGST
                taxGST.style.display = "block";
                taxIGST.style.display = "none";
            } else if (cmpState !== placeOfSupply) {
                // If cmpState is not equal to placeOfSupply, display IGST and hide GST
                taxGST.style.display = "none";
                taxIGST.style.display = "block";
            }
        });
    }
    
    // Add onchange event listener to the place of supply select element
    document.getElementById("placeOfSupply").onchange = changePlaceOfSupply;
    
    // Trigger the function once on page load to initialize based on the initial values
    changePlaceOfSupply();







    // Function to calculate and display the total for a row
// Function to calculate the total for a specific row
function calculateRowTotal(rowId) {
    var row = $('#tab_row' + rowId);
    var qty = parseFloat(row.find('.qty').val()) || 0; // Handle cases where the input is empty
    var price = parseFloat(row.find('.price').val()) || 0; // Handle cases where the input is empty
    var discount = parseFloat(row.find('.disc').val()) || 0; // Handle cases where the input is empty

    var total = (qty * price) - discount;
    row.find('.total').val(total.toFixed(2));
}

// Function to handle changes in quantity, price, and discount inputs
$(document).on('input', '.qty, .price, .disc', function() {
    var rowId = $(this).closest('tr').attr('id').replace('tab_row', '');
    calculateRowTotal(rowId);
});

// Initial calculation for the first row
calculateRowTotal(1);
